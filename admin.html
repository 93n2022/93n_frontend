<!DOCTYPE html>
<html>
  <head>
    <title>93N Admin Function</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <button id="connect" onclick="connect()">Connect</button>
    93N balance: <a id="lbl93n"></a> BUSD balance: <a id="lblBusd"></a>
  </body>
  <script>
    A = [
      '0x686BE080Cbad57A96F1616778767EA09a96146ed',
      '0xEAa78380E5a6cc865Ea92ad0407E00265791f63c',
      '0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56',
      '0x2d54dD6818E7da36Ce2a6755048A36c5De8D2921',
    ]; //721, 20, U, XC
    u0 = '[]';
    ua = 'uint256';
    u1 = { internalType: ua, name: '', type: ua };
    u2 = { internalType: ua + u0, name: '', type: ua + u0 };
    ub = 'address';
    u3 = { internalType: ub, name: '', type: ub };
    u4 = { internalType: ub + u0, name: '', type: ub + u0 };
    uc = 'string';
    u5 = { internalType: uc, name: '', type: uc };
    u6 = { internalType: uc + u0, name: '', type: uc + u0 };
    uf = 'function';
    un = 'nonpayable';
    uv = 'view';
    ubo = {
      inputs: [u3],
      name: 'balanceOf',
      outputs: [u1],
      stateMutability: uv,
      type: uf,
    };
    uap = {
      inputs: [u3, u1],
      name: 'approve',
      outputs: [],
      stateMutability: un,
      type: uf,
    };
    ual = {
      inputs: [u3, u3],
      name: 'allowance',
      outputs: [u1],
      stateMutability: uv,
      type: uf,
    };
    async function LB(c) {
      return (await c.methods.balanceOf(acct).call()) / 1e18;
    }
    async function connect() {
      if (typeof ethereum != 'undefined') {
        web3 = new Web3(ethereum);
        acct = await ethereum.request({ method: 'eth_requestAccounts' });
        acct = acct[0];
        FA = { from: acct };
        if ((await web3.eth.net.getId()) != CHAIN) {
          await ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{ chainId: '0x' + CHAIN.toString(16) }],
          });
        }
        contract = new web3.eth.Contract(
          [
            {
              inputs: [u2],
              name: 'merging',
              outputs: [],
              stateMutability: un,
              type: uf,
            },
            {
              anonymous: false,
              inputs: [
                {
                  indexed: true,
                  internalType: ub,
                  name: 'from',
                  type: ub,
                },
                {
                  indexed: true,
                  internalType: ub,
                  name: 'to',
                  type: ub,
                },
                {
                  indexed: false,
                  internalType: ua,
                  name: 'amount',
                  type: ua,
                },
                {
                  indexed: true,
                  internalType: ua,
                  name: 'status',
                  type: ua,
                },
              ],
              name: 'Payout',
              type: 'event',
            },
            {
              inputs: [u3, u1, u1],
              name: 'purchase',
              outputs: [],
              stateMutability: un,
              type: uf,
            },
            {
              inputs: [u1],
              name: 'renew',
              outputs: [],
              stateMutability: un,
              type: uf,
            },
            {
              inputs: [],
              name: 'withdraw',
              outputs: [],
              stateMutability: un,
              type: uf,
            },
            {
              inputs: [u3],
              name: 'getDownlines',
              outputs: [u4, u1, u1],
              stateMutability: uv,
              type: uf,
            },
            {
              inputs: [u3],
              name: 'getNodes',
              outputs: [u2, u2],
              stateMutability: uv,
              type: 'function',
            },
            {
              inputs: [u1],
              name: 'pack',
              outputs: [u1, u1, u1, u1, u3],
              stateMutability: uv,
              type: uf,
            },
          ],
          A[0]
        );
      } else {
        alert('Please install Metamask');
        window.location.href = 'https://metamask.io/download/';
      }
      contract2 = new web3.eth.Contract([ubo, uap, ual], A[1]);
      contract3 = new web3.eth.Contract([ubo, uap, ual], A[2]);
      contract4 = new web3.eth.Contract(
        [
          {
            inputs: [u1, u3, u3],
            name: 'exchange',
            outputs: [],
            stateMutability: un,
            type: uf,
          },
          {
            inputs: [u1, u3, u3],
            name: 'getAmountsOut',
            outputs: [u1],
            stateMutability: uv,
            type: uf,
          },
        ],
        A[3]
      );
      $('#lbl93N').html(LB(contract2));
      $('#lblBusd').html(LB(contract3));
    }
    connect();
  </script>
</html>
